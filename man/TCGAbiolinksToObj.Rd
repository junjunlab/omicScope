% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/constructor.R
\name{TCGAbiolinksToObj}
\alias{TCGAbiolinksToObj}
\title{Convert TCGAbiolinks Object to OmicScope Object}
\usage{
TCGAbiolinksToObj(
  gtf_anno = NULL,
  tcgabiolinks_obj = NULL,
  gtex_counts_data = NULL
)
}
\arguments{
\item{gtf_anno}{Character string. Path to a GTF annotation file. Required
when \code{gtex_counts_data} is provided. The GTF file should contain
gene_id, gene_name, and gene_biotype (or gene_type) columns. Default is NULL.}

\item{tcgabiolinks_obj}{A SummarizedExperiment object obtained from
TCGAbiolinks (e.g., using \code{GDCprepare()}). Must contain:
\itemize{
\item colData: sample metadata including tissue_type, sample, barcode,
vital_status, days_to_death, days_to_last_follow_up
\item assay "unstranded": raw counts matrix
\item assay "tpm_unstrand": normalized TPM values (optional)
\item rowData: gene annotation with gene_id, gene_name, gene_type
}}

\item{gtex_counts_data}{Character string or NULL. Path to a GTEx counts
data file (tab-separated format with gene names in columns 1-2 and sample
counts in subsequent columns). When provided, GTEx normal tissue data will
be integrated with TCGA data. Default is NULL.}
}
\value{
An OmicScope object (SummarizedExperiment) containing:
\item{assays}{
\itemize{
\item counts: Combined sparse matrix (dgCMatrix) of TCGA and GTEx
counts (if GTEx provided)
\item normed_counts: TPM normalized counts (only when GTEx not provided)
}
}
\item{colData}{
Sample metadata including:
\itemize{
\item group: Tissue type (Tumor/Normal)
\item batch: Data source (TCGA/GTEX)
\item group2: Combined batch-group identifier
\item OS.time: Overall survival time in days
\item OS: Overall survival status (1=dead, 0=alive)
\item All original TCGA metadata columns
}
}
\item{rowData}{Gene annotation with gene_id, gene_name, gene_biotype}
\item{gtfAnno}{GenomicRanges object from GTF file (empty if GTEx not used)}
}
\description{
This function converts a TCGAbiolinks SummarizedExperiment object into an
OmicScope object format. It processes TCGA RNA-seq data and optionally
integrates GTEx normal tissue data for comparative analysis. The function
handles metadata formatting, counts matrix extraction, survival data
processing, and gene annotation.
}
\examples{
\dontrun{
# Example 1: Convert TCGA data only
library(TCGAbiolinks)

# Download and prepare TCGA data
query <- GDCquery(
  project = "TCGA-LUAD",
  data.category = "Transcriptome Profiling",
  data.type = "Gene Expression Quantification",
  workflow.type = "STAR - Counts"
)
GDCdownload(query)
tcga_data <- GDCprepare(query)

# Convert to OmicScope object
omics_obj <- TCGAbiolinksToObj(tcgabiolinks_obj = tcga_data)

# Example 2: Integrate with GTEx data
omics_obj_with_gtex <- TCGAbiolinksToObj(
  gtf_anno = "gencode.v22.annotation.gtf",
  tcgabiolinks_obj = tcga_data,
  gtex_counts_data = "GTEx_Analysis_2017-06-05_v8_RNASeQCv1.1.9_gene_reads.gct"
)

# Access different components
counts <- assay(omics_obj_with_gtex, "counts")
metadata <- colData(omics_obj_with_gtex)
gene_info <- rowData(omics_obj_with_gtex)

# Check survival data
table(metadata$OS)
summary(metadata$OS.time)
}



}
